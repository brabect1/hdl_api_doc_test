<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>APB UVM Agent: APB Agent UVM Verifivation Component</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link rel="search" href="search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="APB UVM Agent"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">APB UVM Agent
   &#160;<span id="projectnumber">0.0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,true,'search.php','Search');
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">APB Agent UVM Verifivation Component </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2>Overview </h2>
<p>This UVC (UVM Verification Component) implements a simple APB bus agent. The agent consists of lower level components that yield initiating and monitoring bus transactions. The agent's structure is captured in the figure below.</p>
<p>Components of the agent:</p>
<ul>
<li>Driver (class <a class="el" href="classapb__driver.html" title="Implements an APB bus master acting as the driver of an APB agent. ">apb_driver</a>)</li>
<li>Monitor (class <a class="el" href="classapb__monitor.html" title="Implements an APB bus transaction monitor. ">apb_monitor</a>)</li>
<li>Sequencer (class <a class="el" href="classapb__sequencer.html" title="Sequencer specialization for use with apb_driver. ">apb_sequencer</a>)</li>
<li>Coverage monitor (class <a class="el" href="classapb__coverage__monitor.html" title="Collects basic functional coverage information observed by an APB agent. ">apb_coverage_monitor</a>)</li>
</ul>
<p>The agent may operate in an active mode, in which it instantiates all the usual UVC comonents (driver, sequencer, monitor). In a passive mode, the agent instantiates only the monitor. The operation mode as well as other features are controlled through an agent's configuration object (class <a class="el" href="classapb__agent__config.html" title="Encapsulates APB agent configuration settings. ">apb_agent_config</a>).</p>
<p>The agent may be paired with a UVM register model through an adapter class <a class="el" href="classreg2apb__adapter.html" title="Implements the translation between apb_seq_item and uvm_reg_bus_op. ">reg2apb_adapter</a>.</p>
<div class="image">
<img src="apb_agent.png" alt="apb_agent.png"/>
<div class="caption">
apb_agent</div></div>
<h2>Basic Use </h2>
<p>The following code shows the basic integration of the APB agent into an environment.</p>
<div class="fragment"><div class="line">class my_env extends uvm_env;</div><div class="line"></div><div class="line">apb_agent_pkg::apb_agent m_apb_agent;</div><div class="line"></div><div class="line">function void build_phase(uvm_phase phase);</div><div class="line">    apb_agent_pkg::apb_agent_config l_apb_agent_cfg;</div><div class="line"></div><div class="line">    // setup agent&#39;s configuration</div><div class="line">    l_apb_agent_cfg = ...</div><div class="line"></div><div class="line">    // instantiate the agent</div><div class="line">    uvm_config_db #(apb_agent_pkg::apb_agent_config)::set(this, &quot;m_apb_agent*&quot;, &quot;apb_agent_config&quot;, l_apb_agent_cfg);</div><div class="line">    m_apb_agent = apb_agent::type_id::create(&quot;m_apb_agent&quot;, this);</div><div class="line"></div><div class="line">    ...</div><div class="line">endfunction: build_phase</div><div class="line"></div><div class="line">function void connect_phase(uvm_phase phase);</div><div class="line">    ...</div><div class="line">    // Set up the agent sequencers as resources:</div><div class="line">    uvm_config_db #(apb_agent_pkg::apb_sequencer)::set(null, &quot;*&quot;, &quot;apb_sequencer&quot;, m_apb_agent.m_sequencer);</div><div class="line">    ...</div><div class="line">endfunction: connect_phase</div><div class="line"></div><div class="line">endclass: my_env</div></div><!-- fragment --><h2>Using Register Model </h2>
<p>Some extra code is needed to pair the agent with a register model.</p>
<div class="fragment"><div class="line">class my_env extends uvm_env;</div><div class="line"></div><div class="line">my_env_config m_cfg; // environment config (includes a register model `my_rm`)</div><div class="line"></div><div class="line">uvm_reg_predictor#(apb_agent_pkg::apb_seq_item) apb2reg_predictor; // we will use an explicit predictor</div><div class="line"></div><div class="line">function void spi_env::build_phase(uvm_phase phase);</div><div class="line">    if(!uvm_config_db #(my_env_config)::get(this, &quot;&quot;, &quot;my_env_config&quot;, m_cfg)) begin</div><div class="line">        `uvm_error(&quot;build_phase&quot;, &quot;Failed to find my_env_config&quot;)</div><div class="line">    end</div><div class="line">    ...</div><div class="line">    // build apb_agent</div><div class="line">    ...</div><div class="line">    // Build the register model predictor</div><div class="line">    apb2reg_predictor = uvm_reg_predictor #(apb_agent_pkg::apb_seq_item)::type_id::create(&quot;apb2reg_predictor&quot;, this);</div><div class="line">    ...</div><div class="line">endfunction:build_phase</div><div class="line"></div><div class="line">function void connect_phase(uvm_phase phase);</div><div class="line">    if(m_apb_agent.m_cfg.active == UVM_ACTIVE) begin</div><div class="line">        apb_agent_pkg::reg2apb_adapter reg2apb;</div><div class="line">        reg2apb = reg2apb_adapter::type_id::create(&quot;reg2apb&quot;);</div><div class="line"></div><div class="line">        // Only set up register sequencer layering if the top level env</div><div class="line">        if(m_cfg.my_rm.get_parent() == null) begin</div><div class="line">            m_cfg.my_rm.APB_map.set_sequencer(m_apb_agent.m_sequencer, reg2apb);</div><div class="line">        end</div><div class="line"></div><div class="line">        // Replacing implicit register model prediction with explicit prediction</div><div class="line">        // based on APB bus activity observed by the APB agent monitor</div><div class="line">        // Set the predictor map:</div><div class="line">        apb2reg_predictor.map = m_cfg.my_rm.APB_map;</div><div class="line">        // Set the predictor adapter:</div><div class="line">        apb2reg_predictor.adapter = reg2apb;</div><div class="line">        // Disable the register models auto-prediction</div><div class="line">        m_cfg.my_rm.APB_map.set_auto_predict(0);</div><div class="line">        // Connect the predictor to the bus agent monitor analysis port</div><div class="line">        m_apb_agent.ap.connect(apb2reg_predictor.bus_in);</div><div class="line">    end</div><div class="line">    ...</div><div class="line">endfunction: connect_phase</div><div class="line"></div><div class="line">endclass: my_env</div></div><!-- fragment --> </div></div><!-- contents -->
<br>
<!--
<table border="0" width="100%">
  <tr>
    <td width="15%"></td>
    <td></td>
    <td width="15%"></td>
  </tr>
</table>
-->
</body>
</html>
